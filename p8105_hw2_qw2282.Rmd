---
title: "P8105_hw2_qw2282"
author: "Qinyao Wu"
date: "9/28/2018"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

```{r}
#Import the data
nyc_transit_data = read.csv(file = "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
  janitor::clean_names() %>% 
  select(line, station_name, station_latitude, station_longitude, starts_with("route"), entry, vending, entrance_type, starts_with("ada")) %>% 
  mutate(entry = recode(entry, `YES` = TRUE, `NO` = FALSE)) 


distinct_station = distinct(nyc_transit_data, station_name,route1, .keep_all = TRUE)
dim(distinct_station)  #451 distinct stations.

ada_com_distinction_station = filter(distinct_station, ada == TRUE)
dim(ada_com_distinction_station) #76 are ada complimented. 

without_vending = filter(distinct_station, vending == "NO")
without_vending_allow_entry = 
  filter(distinct_station, vending == "NO", entry == TRUE)
proportion = nrow(without_vending_allow_entry) / nrow(without_vending) #55.6%

transitdata_tidy = gather(nyc_transit_data, key = route_number, value = route_name, route1:route11)

station_A_route = 
  filter(transitdata_tidy, route_name == "A") %>% 
  distinct(station_name, .keep_all = TRUE)  %>% #56 distinct stations serve A
  filter(ada == TRUE) #15 of them have ada.

```


##Problem 2
```{r problem 2}

trash_wheel_data = readxl::read_excel("./data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", sheet = 1, range = "A2:N258") %>% 
  janitor::clean_names() 

trash_wheel_data = filter(trash_wheel_data, !is.na(dumpster)) %>% 
  mutate(sports_balls = as.integer(round(sports_balls, 0)))

precipitation_2016 = readxl::read_excel("./data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", sheet = 4, range = "A2:B15") %>% 
  janitor::clean_names() %>% 
  filter(!is.na(month)) %>% 
  mutate(year = 2016)
  
precipitation_2017 = readxl::read_excel("./data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", sheet = 3, range = "A2:B15") %>% 
  janitor::clean_names() %>% 
  filter(!is.na(month)) %>% 
  mutate(year = 2017)

precipitation_tidy = bind_rows(precipitation_2016, precipitation_2017) %>%
  janitor::clean_names() %>% 
  mutate(month = month.name[month])
  



```








